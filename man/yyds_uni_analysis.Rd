% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/yyds_uni_analysis.R
\name{yyds_uni_analysis}
\alias{yyds_uni_analysis}
\title{Batch perform univariate analysis
批量单因素分析}
\usage{
yyds_uni_analysis(
  data,
  vars,
  outcome,
  time_var = NULL,
  family = NULL,
  effect_digits = 2,
  p_digits = 3,
  full = FALSE,
  event = FALSE
)
}
\arguments{
\item{data}{A data frame containing the variables to be analyzed.}

\item{vars}{A character vector of variable names to analyze.}

\item{outcome}{The outcome variable name (character string).}

\item{time_var}{For Cox models, the time variable name (character string).
Default is NULL for non-Cox models.}

\item{family}{For GLM models, the family function (e.g., \code{binomial()},\code{poisson()},\code{gaussian()}).
Required for GLM models, NULL for Cox models.}

\item{effect_digits}{Number of decimal places for effect estimates. Default is 2.}

\item{p_digits}{Number of decimal places for p-values. Default is 3.}

\item{full}{Logical, whether to return full model details (estimate, CI bounds).
Default is FALSE.}

\item{event}{Logical, whether to include event counts for binary outcomes.
Default is FALSE.}
}
\value{
A tibble with analysis results, formatted for easy interpretation.
The columns depend on the model type and parameters:
\itemize{
\item For Cox models: HR (95\% CI)
\item For logistic regression: OR (95\% CI)
\item For Poisson regression: RR (95\% CI)
\item For linear regression: β (95\% CI)
Additional columns are included when full=TRUE or event=TRUE.
}
}
\description{
\itemize{
\item This function performs univariate analysis (Cox, logistic, Poisson, or linear regression)
for multiple variables and returns formatted results. It automatically handles
both continuous and categorical variables, providing reference groups for factors.
\item 本函数执行单因素分析（Cox、逻辑、泊松或线性回归）对多个变量进行分析并返回格式化结果。
自动处理连续变量和分类变量，为因子变量提供参考组
}
}
\examples{
\dontrun{
# 1. Cox比例风险模型
yyds_uni_analysis(
  data = data,
  vars = c("A_age", "A_sex", "A_edu2","A_marital"),
  outcome = "Die_mortstat",
  time_var = "Die_permth_int",
  full = TRUE,
  event = TRUE
)

#    Variable      `Events, n/N` `HR (95\% CI)` `p-value` hr    lower upper
#    <chr>         <chr>         <chr>         <chr>     <chr> <chr> <chr>
#  1 "A_age"       -             1.09 (1.09-1… <0.001    1.09  1.09  1.10
#  2 "A_sex"       NA            NA            NA        NA    NA    NA
#  3 "  female"    191/4379      Ref           -         Ref   1     1
#  4 "  male"      312/4229      1.69 (1.41-2… <0.001    1.69  1.41  2.03
#  5 "A_edu2"      NA            NA            NA        NA    NA    NA
#  6 "  Bachelor'… 79/2179       Ref           -         Ref   1     1
#  7 "  High scho… 297/3814      2.24 (1.75-2… <0.001    2.24  1.75  2.88
#  8 "  Some coll… 126/2613      1.39 (1.05-1… 0.023     1.39  1.05  1.84
#  9 "A_marital"   NA            NA            NA        NA    NA    NA
# 10 "  formerly … 216/1850      Ref           -         Ref   1     1
# 11 "  married"   246/5177      0.38 (0.32-0… <0.001    0.38  0.32  0.45
# 12 "  never mar… 41/1580       0.20 (0.14-0… <0.001    0.20  0.14  0.28

# 2. poisson泊松回归
yyds_uni_analysis(
  data = data,
  vars = c("A_age", "A_sex", "A_edu2","A_marital"),
  outcome = "CKM_stage",
  family = poisson(),
  effect_digits = 3,
  p_digits = 4
)

#    Variable                        `RR (95\% CI)`       `p-value`
#    <chr>                           <chr>               <chr>
#  1 "A_age"                         1.018 (1.017-1.019) <0.001
#  2 "A_sex"                         NA                  NA
#  3 "  female"                      Ref                 -
#  4 "  male"                        1.107 (1.074-1.141) <0.001
#  5 "A_edu2"                        NA                  NA
#  6 "  Bachelor's degree or more"   Ref                 -
#  7 "  High school diploma or less" 1.261 (1.213-1.311) <0.001
#  8 "  Some college"                1.136 (1.088-1.185) <0.001
#  9 "A_marital"                     NA                  NA
# 10 "  formerly married"            Ref                 -
# 11 "  married"                     0.822 (0.794-0.852) <0.001
# 12 "  never married"               0.619 (0.589-0.651) <0.001

# 3. logistics逻辑回归（明确指定family）
yyds_uni_analysis(
  data = data,
  vars = c("A_age", "A_sex", "A_edu2","A_marital"),
  outcome = "Die_mortstat",
  family = binomial(),
  full = TRUE,
  event = TRUE
)

#    Variable      `Events, n/N` `OR (95\% CI)` `p-value` or    lower upper
#    <chr>         <chr>         <chr>         <chr>     <chr> <chr> <chr>
#  1 "A_age"       -             1.09 (1.09-1… <0.001    1.09  1.09  1.10
#  2 "A_sex"       NA            NA            NA        NA    NA    NA
#  3 "  female"    191/4379      Ref           -         Ref   1     1
#  4 "  male"      312/4229      1.75 (1.45-2… <0.001    1.75  1.45  2.10
#  5 "A_edu2"      NA            NA            NA        NA    NA    NA
#  6 "  Bachelor'… 79/2179       Ref           -         Ref   1     1
#  7 "  High scho… 297/3814      2.24 (1.75-2… <0.001    2.24  1.75  2.91
#  8 "  Some coll… 126/2613      1.35 (1.01-1… 0.042     1.35  1.01  1.80
#  9 "A_marital"   NA            NA            NA        NA    NA    NA
# 10 "  formerly … 216/1850      Ref           -         Ref   1     1
# 11 "  married"   246/5177      0.38 (0.31-0… <0.001    0.38  0.31  0.46
# 12 "  never mar… 41/1580       0.20 (0.14-0… <0.001    0.20  0.14  0.28

# 4. gaussian线性回归
yyds_uni_analysis(
  data = data,
  vars = c("A_sex", "A_edu2","A_marital"),
  outcome = "A_age",
  family = gaussian(),  # 必须指定
  full = T
)
#    Variable                        `β (95\% CI)`           `p-value` β      lower  upper
#    <chr>                           <chr>                  <chr>     <chr>  <chr>  <chr>
#  1 "A_sex"                         NA                     NA        NA     NA     NA
#  2 "  female"                      Ref                    -         Ref    0      0
#  3 "  male"                        0.09 (-0.64-0.83)      0.802     0.09   -0.64  0.83
#  4 "A_edu2"                        NA                     NA        NA     NA     NA
#  5 "  Bachelor's degree or more"   Ref                    -         Ref    0      0
#  6 "  High school diploma or less" 3.57 (2.66-4.48)       <0.001    3.57   2.66   4.48
#  7 "  Some college"                -0.71 (-1.70-0.27)     0.156     -0.71  -1.70  0.27
#  8 "A_marital"                     NA                     NA        NA     NA     NA
#  9 "  formerly married"            Ref                    -         Ref    0      0
# 10 "  married"                     -9.37 (-10.19--8.54)   <0.001    -9.37  -10.19 -8.54
# 11 "  never married"               -24.83 (-25.87--23.79) <0.001    -24.83 -25.87 -23.79
}

}

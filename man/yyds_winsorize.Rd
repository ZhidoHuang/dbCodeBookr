% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/yyds_winsorize.R
\name{yyds_winsorize}
\alias{yyds_winsorize}
\title{缩尾处理变量极端情况}
\usage{
yyds_winsorize(
  df,
  vars,
  lower = 0.01,
  upper = 0.99,
  pdf_name = NULL,
  suffix = "_ex"
)
}
\arguments{
\item{df}{输入数据框（data.frame 或 tibble）}

\item{vars}{需要处理的变量名（字符向量）}

\item{lower}{下分位数阈值（默认 0.01，即 1\% 分位数）}

\item{upper}{上分位数阈值（默认 0.99，即 99\% 分位数）}

\item{pdf_name}{输出 PDF 报告的文件路径（可选，默认 NULL 不生成报告）}

\item{suffix}{处理后变量的后缀（默认 "_ex"）}
}
\value{
返回包含以下内容的列表：
\itemize{
\item \code{data} - 处理后的数据框（新增后缀列保留原始数据）
\item \code{summary} - 统计对比表格（包含原始数据和处理后数据的描述性统计）
}
}
\description{
对指定变量进行缩尾处理（Winsorization），将超出分位数阈值的极端值替换为指定分位数的值，
并可生成包含原始数据与处理后数据对比的 PDF 图报告。
}
\details{
函数会执行以下操作：
\enumerate{
\item 计算每个变量的指定分位数阈值
\item 将超出阈值的值替换为阈值（下限替换为 lower 分位数，上限替换为 upper 分位数）
\item 在 PDF 报告中生成每对变量的对比 QQ 图（原始 vs 处理后）
\item 返回包含处理结果和统计对比的列表
}
}
\examples{
\donttest{
# 基本用法
set.seed(123)
test_df <- data.frame(
  normal = rnorm(1000),
  skewed = c(rnorm(900), runif(100, 5, 10))
)

# 默认处理（不生成报告）
result <- yyds_winsorize(test_df, vars = c("normal", "skewed"))
head(result$data)
result$summary

# 自定义参数（生成报告）
\dontrun{
result <- yyds_winsorize(
  test_df,
  vars = "skewed",
  lower = 0.05,
  upper = 0.95,
  suffix = "_win",
  pdf_name = "winsorize_report.pdf"
)
}
}

}
